# shellcheck disable=SC2148,SC1090
#
# ShellCheck ignore list:
#  - SC2148: Tips depend on target shell and yours is unknown. Add a shebang.
#  - SC1090: Can't follow non-constant source. Use a directive to specify location.

test -f ~/dotfiles/private_settings/pre.bash && source ~/dotfiles/private_settings/pre.bash

if [ -e "$COMMON_RC" ]; then
  source "$COMMON_RC"
fi

# load homebrew bash-completion file by apt bash-completion.
load_brew_completion() {
  local brew_completion
  brew_completion="${HOMEBREW_PREFIX}/etc/bash_completion.d"

  type brew >/dev/null 2>&1 || return
  test ! -d "${brew_completion}" && return
  while read -r comp_file; do
    if ! [[ "${comp_file}" =~ /(gh)$ ]]; then
      . "${comp_file}"
    fi
  done < <(find "${brew_completion}" -type f -or -type l)
}
load_brew_completion
unset -f load_brew_completion

# ============== .bashrc =================
# /etc/skel/.bashrc

if is_wsl; then
  test -r ~/.bashrc_wsl && . ~/.bashrc_wsl
elif is_linux; then
  test -r ~/.bashrc_linux && . ~/.bashrc_linux
elif is_mac; then
  :
else
  echo 'nomatch'
fi

test -r ~/.bash_aliases && . ~/.bash_aliases
test -r ~/.bashrc.local && . ~/.bashrc.local

. ~/dotfiles/modules/keybind.bash
. ~/dotfiles/functions/primary.bash

test -f ~/dotfiles/private_settings/post.bash && source ~/dotfiles/private_settings/post.bash

eval "$(gh completion -s bash)"
