# =======================================

# PS1
if [[ "$(getent passwd vagrant)" != "" && -f /etc/bash_completion.d/git-prompt.sh ]]; then
  if [ ${EUID:-${UID}} = 0 ]; then
    HOST_NAME="\H"
    BEGIN="\[\e[1;37;41m\]"
    BEGIN_TRIANGLE="\[\e[0;32;41m\]"
    MIDDLE="\[\e[0;30;43m\]"
    MIDDLE_TRIANGLE="\[\e[0;33m\]"
    END="\[\e[m\]"
    GIT_CLR="\[\e[37;45m\]"
  else
    HOST_NAME="\H"
    BEGIN="\[\e[1;37;45m\]"
    BEGIN_TRIANGLE="\[\e[0;32;45m\]"
    MIDDLE="\[\e[0;30;47m\]"
    MIDDLE_TRIANGLE="\[\e[0;37m\]"
    END="\[\e[m\]"
    GIT_CLR="\[\e[37;45m\]"
  fi

  PS1="${BEGIN}\u@${HOST_NAME}${BEGIN_TRIANGLE} ${MIDDLE} \W ${MIDDLE_TRIANGLE}${GIT_CLR}\$(__git_ps1 '(%s)')${END} \! \\$ "

elif [ -f /etc/bash_completion.d/git-prompt.sh ]; then
  # debian prompt + git
  PS1='\t ${debian_chroot:+($debian_chroot)}\[\033[01;32m\]\u@\h\033[00m:\033[01;34m\w\[\033[00m $(__git_ps1 "\e[30;47m(%s)")\e[39;49m <`git config user.name`>\n\$ '

elif [ 1==1 ]; then
  PS1='\e[30;47m \t \e[30;44m\e[30;37m \W \e[0m we need git! \n\$ '
else
  # sample
  # wsl
  PS1='${debian_chroot:+($debian_chroot)}\u@\h:\w\$ '
  # chrome os
  PS1='${debian_chroot:+($debian_chroot)}\[\033[01;32m\]\u@\h\[\033[00m\]:\[\033[01;34m\]\w\[\033[00m\n\$ '
fi

# if [ $# -lt 2 ]; then a2=''; else a2="@~${2}"; fi; git diff @~${1:0} $a2

if is_ubuntu && ! is_ubuntu; then
  # Jekyll on Ubuntu
  # https://jekyllrb.com/docs/installation/ubuntu/
  sudo apt-get install ruby-full build-essential zlib1g-dev

  echo '# Install Ruby Gems to ~/gems' >>~/.bashrc
  echo 'export GEM_HOME="$HOME/gems"' >>~/.bashrc
  echo 'export PATH="$HOME/gems/bin:$PATH"' >>~/.bashrc
  source ~/.bashrc

  gem install jekyll bundler
fi
