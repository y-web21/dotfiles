echo 'bashrc [wsl]'

# ================ alias =================
# open app by extension
alias open='xdg-open'

# =============== env, var ===============
export WINHOME="/mnt/c/Users/${USER}"
# wslvar がスクロールバッファをクリアするのでこの方法は保留
# export WINHOME="$(wslpath "$(wslvar USERPROFILE)")"
CONFIG_DIR_WIN="/mnt/c/Users/${USER}/user/config/dotfiles"
# ========================================

############### ターミナルのコマンド受付状態の表示変更
# \u ユーザ名
# \h ホスト名
# \W カレントディレクトリ
# \w カレントディレクトリのパス
# \n 改行
# \d 日付
# \[ 表示させない文字列の開始
# \] 表示させない文字列の終了
# \$ $
# ##############
# []は無くても良い。\e[<font-style>;<font-color>;<back-color>m
# 39,49mでそれぞれ色リセット。\e[0m オールリセット
# PS1='\e[0;33;40m\t\e[1;37;49m \u\e[30;32m@\H \e[39;49m \W \e[0m \! \n\$ '
if [ -f /etc/bash_completion.d/git-prompt.sh ]; then
  PS1='\e[30;47m \t \e[30;44m\e[30;37m \W $(__git_ps1 "\e[30;47m(%s)")\e[39;49m <`git config user.name`> \e[0m\n\$ '
elif [ 1==1 ]; then
  PS1='\e[30;47m \t \e[30;44m\e[30;37m \W \e[0m we need git! \n\$ '
else
  PS1='${debian_chroot:+($debian_chroot)}\u@\h:\w\$ '
fi

if [[ "$(which vagrant)" = '' ]]; then
  echo 'export vagrant env var'
  # WSL2 の Vagrant が Windows の VirtualBox を使えるようにする
  # hostと同じバージョンのvagrantをインストール
  # require vagrant plugin
  # vagrant plugin install virtualbox_WSL2
  export VAGRANT_WSL_ENABLE_WINDOWS_ACCESS=1
  export VAGRANT_WSL_WINDOWS_ACCESS_USER=${USER}
  export PATH="$PATH:/mnt/c/Program Files/Oracle/VirtualBox"
  # export VAGRANT_WSL_WINDOWS_ACCESS_USER_HOME_PATH="/home/${USER}/imo"

  function cp-to-vagrant {
    echo 'ex.scp -r -P 2222 -F ssh.config ./src vagrant@localhost:/home/vagrant/'
    local src=$1
    local dst=$2
    local config=${3:-ssh.config}
    local port=${3:-2222}
    local hostname=${5:-localhost}
    local username=${6:-vagrant}
    if [[ $# < 3 ]]; then
      cat <<-EOF
			2 args required
			\$1 = filepath(host)
			\$2 = destination(guest)
			\$3 = config default=./${config}
			\$4 = port default=${port}
			\$5 = hostname default=${hostname}
			\$6 = username default=${username}
			EOF
    else
      scp -r -P ${port} -F ${config} ${src} ${username}@${hostname}:${dst}
    fi
  }

  function cp-from-vagrant {
    echo 'ex.scp -r -P 2222 -F ssh.config vagrant@localhost:/home/vagrant/src ./'
    local src=$1
    local dst=$2
    local config=${3:-ssh.config}
    local port=${3:-2222}
    local hostname=${5:-localhost}
    local username=${6:-vagrant}
    if [[ $# < 3 ]]; then
      cat <<-EOF
			2 args required
			\$1 = filepath(guest)
			\$2 = destination(host)
			\$3 = config default=./${config}
			\$4 = port default=${port}
			\$5 = hostname default=${hostname}
			\$6 = username default=${username}
			EOF
    else
      scp -r -P ${port} -F ${config} ${username}@${hostname}:${src} ${dst}
    fi
  }

fi

# read -p "Hit enter: "

alias qfind='find / \( -path /mnt* -o -path /proc* -o -path /var* \) -prune -o -print'
# alias qfind='sudo find / -path /mnt* -prune -o -path /proc* -prune -o -print'
# alias qfind='sudo find / -not -path "/mnt*" -and -not -path "/lib*" -and -not -path "/proc*"'
alias file-cnt='sudo find / -mindepth 1 -maxdepth 1 -not -path "/mnt*" 2>/dev/null | xargs -i bash -c '\''echo -n '\''{}/ '\'' && sudo find {}/ -type f | wc -l'\'' | sort'
